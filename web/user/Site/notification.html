<script>
    if (!localStorage.getItem("id")) {
        location.replace("signin.html");
    }
</script>
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>notification</title>

    <link rel="shortcut icon" href="assets/images/logo/nCbdXaxqvpcanRB.png">


    <link href="https://fonts.googleapis.com/css?family=Montserrat:100,200,300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">

    <link rel="stylesheet" href="assets/vendors/menu/src/main.menu.css">

    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="assets/css/utilities.css">
    <link rel="stylesheet" type="text/css" href="assets/css/colors.css">
    <link rel="stylesheet" type="text/css" href="assets/css/colors-gh.css">
    <link rel="stylesheet" type="text/css" href="assets/css/colors-g.css">

    <!-- CAROUSEL -->
    <link rel="stylesheet" href="assets/vendors/owl.carousel/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/vendors/owl.carousel/owl.theme.default.min.css">

    <!-- ANIMATE -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/animate/animate.css">

    <!-- ANIMATED HEADLINES -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/animated-headline/css/style.css">

    <!-- FANCY BOX -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/fancybox/jquery.fancybox.min.css">

</head>

<body>

    <div class="main-header header-shadow cherry-header">
        <div class="container">

            <div class="main-header-container">

                <div class="logo" data-mobile-logo="assets/images/logo/parking.jpg" data-sticky-logo="assets/images/logo/parking.jpg">
                    <a href="index.html"><img src="assets/images/logo/parking.jpg" alt="logo" /></a>
                </div>
                <!-- /LOGO -->

                <div class="burger-menu">
                    <div class="line-menu line-half first-line"></div>
                    <div class="line-menu"></div>
                    <div class="line-menu line-half last-line"></div>
                </div>
                <!-- /BURGER MENU -->

                <nav class="main-menu menu-caret menu-hover-2 submenu-top-border submenu-scale">
                    <ul id="navigation">

                    </ul>
                </nav>
                <!-- NAVIGATION MENU -->

            </div>
            <!-- /HEADER CONTAINER -->

        </div>
        <!-- /CONTAINER -->
    </div>
    <!-- /HEADER -->
    <script>
        if (!localStorage.getItem("id")) {
            document.getElementById("navigation").innerHTML = `
            <li ><a href="index.html">Home</a></li>
                        <li><a href="parkings.html">Parkings</a>

                        </li>

                        <li><a href="about-us.html">About Us</a>
                        </li>
                        <li class="current-menu"><a href="notification.html">notification</a></li>
                        <li><a href="contact-us.html">Avis</a></li>
                        <li><a href="signin.html" ">connexion</a></li>
                        `;
        } else {
            var c = localStorage.getItem("id");

            console.log(c);

            // Post a user

            var url3 = "http://127.0.0.1:3000/users/" + c;
            var xhr3 = new XMLHttpRequest();
            xhr3.open("GET", url3, true);
            xhr3.onload = function() {
                var admins = JSON.parse(xhr3.responseText);
                if (xhr3.readyState == 4 && xhr3.status == "200") {
                    document.getElementById("res").innerHTML = admins.firstname;
                    document.getElementById("res").href = "profile.html?id=" + c;

                } else {

                    console.log("error");
                }
            }
            xhr3.send(null);
            document.getElementById("navigation").innerHTML = `
            <li > <a href="profile.html" id="res" class="far fa-user-circle"style=" color: green;"></a>  </li>
            <li ><a href="index.html">Home</a></li>
                        <li><a href="parkings.html">Parkings</a>

                        </li>

                        <li><a href="about-us.html">About Us</a>
                        </li>
                        <li class="current-menu"><a href="notification.html">notification</a></li>
                        <li><a href="contact-us.html">Avis</a></li>
                                    <li><a href="index.html" onclick="logout()">Se déconnecter</a></li>
                                `;
        }

        function logout() {

            localStorage.removeItem("id");
            location.replace("index.html");

        }
    </script>
    <!-- BREADCRUMB -->
    <section class="bg-cherry pt-s3 pb-s3 text-white">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="d-lg-flex text-center">
                        <div class="align-self-center mb-0--lg mb-s1--md mb-s1--sm mb-s1--xs">
                            <h3 class="text-bold-400 text-size-s2 m-0 text-white"><i class="far fa-bell" style='font-size:23px;color:#13050561'></i> Notification</h3>
                        </div>
                        <div class="ml-auto align-self-center">
                            <ol class="breadcrumb d-flex justify-content-center m-0 bg-none text-size-s1 p-0">
                                <li class="breadcrumb-item"><a class="text-white" href="index.html">Home</a></li>
                                <li class="breadcrumb-item" aria-current="page">Notification</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ROW -->
        </div>
        <!-- /CONTAINER -->
    </section>
    <!-- /SECTION -->
    <!-- /BREADCRUMB -->

    <section class="bg-white pt-s5 pb-s5">
        <div class="container">


            <div class="row">
                <div class="col-lg-4 col-md-4 position-relative">
                    <h4>Réservation Confirmé</h4>
                    <div class="mb-s1 box-shadow-v1-s1--hover position-relative">
                        <div class="row" id="listResCon">
                            <script>
                                var today = new Date();
                                var dd = today.getDate();

                                var mm = today.getMonth() + 1;
                                var yyyy = today.getFullYear();
                                if (dd < 10) {
                                    dd = '0' + dd;
                                }

                                if (mm < 10) {
                                    mm = '0' + mm;
                                }
                                today = yyyy + '-' + mm + '-' + dd;
                                console.log(today);
                                // Create a request variable and assign a new XMLHttpRequest object to it.
                                var request = new XMLHttpRequest();

                                // Open a new connection, using the GET request on the URL endpoint
                                request.open("GET", "http://127.0.0.1:3000/reservations", true);

                                request.onload = function() {
                                    // Begin accessing JSON data here
                                    var data = JSON.parse(this.response);

                                    console.log(data);
                                    var j = 1;
                                    var ee = document.getElementById("listResCon");

                                    data.forEach((i) => {

                                        if ((i.iduser == (localStorage.getItem("id"))) && (i.status == 1) && (i.dateE >= today)) {

                                            ch =

                                                `
                            <div class="col-lg-10 col-md-11 p-0">
                                <div class="bg-white hero-section-parent d-flex justify-content-center position-relative align-items-center bs-solid bc-light bw-s1 match-height min-h--260--md min-h--260--sm min-h--260--xs">
                                    <div>
                                        <img class="max-w--200" src="assets/images/parkings/c.jpg" alt="Bristol Parking Spaces">
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="col-lg-10 col-md-10 p-0">
                                <div class="bg-white pt-s3 pl-s3 pr-s3 pb-s3 match-height">
                                    
                                    <div class="row">
                                        <div class="col-lg-7 col-md-12">
                                            <div class="text-size-20 mt-s3 mb-18"><i class="fas fa-parking"  style='font-size:20px;'>:</i>` + i.nomPar + `</div>
                                           
                                            <h2 class="text-size-17 text-bold-600 text-capitalize mb-8"><i  style='font-size:17px;color:#13050561'>Date d'entrée: ` + i.dateE + `</h2>
                                            <h2 class="text-size-15 text-bold-600 text-capitalize mb-8">` + i.heureE + ` <i class="far fa-clock" style='font-size:15px;color:#13050561'></i></h2>
                                            <h2 class="text-size-17 text-bold-600 text-capitalize mb-8"><i  style='font-size:17px;color:#13050561'></i>Date de sortie: ` + i.dateS + `</h2>
                                            <h2 class="text-size-15 text-bold-600 text-capitalize mb-8">` + i.heureS + ` <i class="far fa-clock" style='font-size:15px;color:#13050561'></i></h2>
                                            Code d'entrée:
                                            <h2 class="text-size-15 text-bold-600 text-capitalize mb-8">` + i._id + `</h2>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            `;
                                            ee.insertAdjacentHTML("beforeend", ch);
                                        }
                                    });

                                };


                                // Send request
                                request.send();
                            </script>
                        </div>
                        <!-- /ROW -->
                    </div>




                </div>
                <div class="col-lg-4 col-md-4 position-relative">
                    <h4>Réservation non Confirmé</h4>
                    <div class="mb-s2 box-shadow-v1-s2--hover position-relative">
                        <div class="row" id="listNonResCon">
                            <script>
                                var today = new Date();
                                var dd = today.getDate();

                                var mm = today.getMonth() + 1;
                                var yyyy = today.getFullYear();
                                if (dd < 10) {
                                    dd = '0' + dd;
                                }

                                if (mm < 10) {
                                    mm = '0' + mm;
                                }
                                today = yyyy + '-' + mm + '-' + dd;
                                console.log(today);
                                // Create a request variable and assign a new XMLHttpRequest object to it.
                                var request = new XMLHttpRequest();

                                // Open a new connection, using the GET request on the URL endpoint
                                request.open("GET", "http://127.0.0.1:3000/reservations", true);

                                request.onload = function() {
                                    // Begin accessing JSON data here
                                    var data = JSON.parse(this.response);

                                    console.log(data);
                                    var j = 1;
                                    var ee = document.getElementById("listNonResCon");

                                    data.forEach((i) => {

                                        if ((i.iduser == (localStorage.getItem("id"))) && (i.status == 2) && (i.dateE >= today)) {

                                            ch =

                                                `
                            <div class="col-lg-10 col-md-11 p-0">
                                <div class="bg-white hero-section-parent d-flex justify-content-center position-relative align-items-center bs-solid bc-light bw-s1 match-height min-h--260--md min-h--260--sm min-h--260--xs">
                                    <div>
                                        <img class="max-w--200" src="assets/images/parkings/r.jpg" alt="Bristol Parking Spaces">
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="col-lg-10 col-md-10 p-0">
                                <div class="bg-white pt-s3 pl-s3 pr-s3 pb-s3 match-height">
                                    
                                    <div class="row">
                                        <div class="col-lg-7 col-md-12">
                                            <div class="text-size-20 mt-s3 mb-18"><i class="fas fa-parking"  style='font-size:20px;'>:</i>` + i.nomPar + `</div>
                                           
                                            <h2 class="text-size-17 text-bold-600 text-capitalize mb-8"><i  style='font-size:17px;color:#13050561'>Date d'entrée: ` + i.dateE + `</h2>
                                            <h2 class="text-size-15 text-bold-600 text-capitalize mb-8">` + i.heureE + ` <i class="far fa-clock" style='font-size:15px;color:#13050561'></i></h2>
                                            <h2 class="text-size-17 text-bold-600 text-capitalize mb-8"><i  style='font-size:17px;color:#13050561'></i>Date de sortie: ` + i.dateS + `</h2>
                                            <h2 class="text-size-15 text-bold-600 text-capitalize mb-8">` + i.heureS + ` <i class="far fa-clock" style='font-size:15px;color:#13050561'></i></h2>
                                            
                                        </div>

                                    </div>
                                </div>
                            </div>
                            `;
                                            ee.insertAdjacentHTML("beforeend", ch);
                                        }
                                    });
                                };

                                // Send request
                                request.send();
                            </script>
                        </div>
                        <!-- /ROW -->
                    </div>




                </div>
                <div class="col-lg-4 col-md-4 position-relative">
                    <h4>Réservation en attente</h4>
                    <div class="mb-s2 box-shadow-v1-s2--hover position-relative">
                        <div class="row" id="listNonResCon1">
                            <script>
                                var today = new Date();
                                var dd = today.getDate();

                                var mm = today.getMonth() + 1;
                                var yyyy = today.getFullYear();
                                if (dd < 10) {
                                    dd = '0' + dd;
                                }

                                if (mm < 10) {
                                    mm = '0' + mm;
                                }
                                today = yyyy + '-' + mm + '-' + dd;
                                console.log(today);
                                // Create a request variable and assign a new XMLHttpRequest object to it.
                                var request = new XMLHttpRequest();

                                // Open a new connection, using the GET request on the URL endpoint
                                request.open("GET", "http://127.0.0.1:3000/reservations", true);

                                request.onload = function() {
                                    // Begin accessing JSON data here
                                    var data = JSON.parse(this.response);

                                    console.log(data);
                                    var j = 1;
                                    var ee = document.getElementById("listNonResCon1");

                                    data.forEach((i) => {

                                        if ((i.iduser == (localStorage.getItem("id"))) && (i.status == 0) && (i.dateE >= today)) {

                                            ch =

                                                `
                            <div class="col-lg-10 col-md-11 p-0">
                                <div class="bg-white hero-section-parent d-flex justify-content-center position-relative align-items-center bs-solid bc-light bw-s1 match-height min-h--260--md min-h--260--sm min-h--260--xs">
                                    <div>
                                        <img class="max-w--180" src="assets/images/parkings/7.png" alt="Bristol Parking Spaces">
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="col-lg-10 col-md-10 p-0">
                                <div class="bg-white pt-s3 pl-s3 pr-s3 pb-s3 match-height">
                                    
                                    <div class="row">
                                        <div class="col-lg-7 col-md-12">
                                            <div class="text-size-20 mt-s3 mb-18"><i class="fas fa-parking"  style='font-size:20px;'>:</i>` + i.nomPar + `</div>
                                           
                                            <h2 class="text-size-17 text-bold-600 text-capitalize mb-8"><i  style='font-size:17px;color:#13050561'>Date d'entrée: ` + i.dateE + `</h2>
                                            <h2 class="text-size-15 text-bold-600 text-capitalize mb-8">` + i.heureE + ` <i class="far fa-clock" style='font-size:15px;color:#13050561'></i></h2>
                                            <h2 class="text-size-17 text-bold-600 text-capitalize mb-8"><i  style='font-size:17px;color:#13050561'></i>Date de sortie: ` + i.dateS + `</h2>
                                            <h2 class="text-size-15 text-bold-600 text-capitalize mb-8">` + i.heureS + ` <i class="far fa-clock" style='font-size:15px;color:#13050561'></i></h2>
                                            
                                        </div>

                                    </div>
                                </div>
                            </div>
                            `;
                                            ee.insertAdjacentHTML("beforeend", ch);
                                        }
                                    });
                                };

                                // Send request
                                request.send();
                            </script>
                        </div>
                        <!-- /ROW -->
                    </div>




                </div>
            </div>
            <!-- /ROW -->

            <!-- /ROW -->
        </div>
        <!-- /CONTAINER -->
    </section>
    <!-- /SECTION -->

    <!--
    #################################
        - Begin: FOOTER -
    #################################
    -->


    <footer class="bg-dark pt-s1 pb-s1">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12">
                    <div class="mt-s2 mb-s2 text-white">
                        <p class="m-0 text-white">&copy; Copyright 2022 by <abbr title="Parking"><a href="#" class="text-white">Parking</a></abbr>. All Rights Reserved.</p>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12">
                    <div class="mt-s2 mb-s2 text-white text-right">
                        <a class="text-white" href="#">Privacy Policy</a> | <a class="text-white" href="#">Terms & Conditions</a>
                    </div>
                </div>
            </div>
            <!-- /ROW -->
        </div>
        <!-- /CONTAINER -->
    </footer>
    <!-- End: FOOTER -
    ################################################################## -->

    <script src="assets/js/jquery-3.3.1.min.js"></script>
    <script src="assets/vendors/appear/jquery.appear.min.js"></script>
    <script src="assets/vendors/jquery.easing/jquery.easing.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/vendors/common/common.min.js"></script>

    <!-- FANCY-BOX -->
    <script src="assets/vendors/fancybox/jquery.fancybox.min.js"></script>

    <!-- MENU -->
    <script src="assets/vendors/menu/src/main.menu.js"></script>

    <!-- CAROUSEL -->
    <script src="assets/vendors/owl.carousel/owl.carousel.min.js"></script>

    <!-- ANIMATED-HEADLINES -->
    <script src="assets/vendors/animated-headline/js/animated-headline.js"></script>

    <!-- THEME-CUSTOM -->
    <script src="assets/js/main.js"></script>

    <!-- THEME-INITIALIZATION-FILES -->
    <script src="assets/js/theme.init.js"></script>
    <script src="assets/js/custom.js"></script>


</body>

</html>