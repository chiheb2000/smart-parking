<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Parking</title>

    <link rel="shortcut icon" href="assets/images/logo/nCbdXaxqvpcanRB.png">


    <link href="https://fonts.googleapis.com/css?family=Montserrat:100,200,300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">

    <link rel="stylesheet" href="assets/vendors/menu/src/main.menu.css">

    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="assets/css/utilities.css">
    <link rel="stylesheet" type="text/css" href="assets/css/colors.css">
    <link rel="stylesheet" type="text/css" href="assets/css/colors-gh.css">
    <link rel="stylesheet" type="text/css" href="assets/css/colors-g.css">

    <!-- CAROUSEL -->
    <link rel="stylesheet" href="assets/vendors/owl.carousel/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/vendors/owl.carousel/owl.theme.default.min.css">

    <!-- ANIMATE -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/animate/animate.css">

    <!-- ANIMATED HEADLINES -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/animated-headline/css/style.css">

    <!-- FANCY BOX -->
    <link rel="stylesheet" type="text/css" href="assets/vendors/fancybox/jquery.fancybox.min.css">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <style>
        .sty {
            left: 13%;
            top: 10%;
            height: 82%;
            width: 74%;
            position: absolute;
        }
    </style>

</head>

<body>

    <div class="main-header header-shadow cherry-header">
        <div class="container">

            <div class="main-header-container">

                <div class="logo" data-mobile-logo="assets/images/logo/parking.jpg" data-sticky-logo="assets/images/logo/parking.jpg">
                    <a href="index.html"><img src="assets/images/logo/parking.jpg" alt="logo" /></a>
                </div>
                <!-- /LOGO -->

                <div class="burger-menu">
                    <div class="line-menu line-half first-line"></div>
                    <div class="line-menu"></div>
                    <div class="line-menu line-half last-line"></div>
                </div>
                <!-- /BURGER MENU -->

                <nav class="main-menu menu-caret menu-hover-2 submenu-top-border submenu-scale">
                    <ul id="navigation">


                </nav>
                <!-- NAVIGATION MENU -->

            </div>
            <!-- /HEADER CONTAINER -->

        </div>
        <!-- /CONTAINER -->
    </div>
    <!-- /HEADER -->
    <script>
        if (!localStorage.getItem("id")) {
            document.getElementById("navigation").innerHTML = `
            
            <li class="current-menu"><a href="index.html">Home</a></li>
                        <li><a href="parkings.html">Parkings</a>

                        </li>

                        <li><a href="about-us.html">About Us</a>
                        </li>
                        <li><a href="notification.html">notification</a></li>
                        <li><a href="contact-us.html">Avis</a></li>
                        <li><a href="signin.html" ">connexion</a></li>
                        `;
        } else {
            var c = localStorage.getItem("id");

            console.log(c);

            // Post a user
            var url3 = "http://172.20.10.4:3000/users/" + c;
            var xhr3 = new XMLHttpRequest();
            xhr3.open("GET", url3, true);
            xhr3.onload = function() {
                var admins = JSON.parse(xhr3.responseText);
                if (xhr3.readyState == 4 && xhr3.status == "200") {
                    document.getElementById("res").innerHTML = admins.firstname;
                    document.getElementById("res").href = "profile.html?id=" + c;
                } else {

                    console.log("error");
                }
            }
            xhr3.send(null);
            document.getElementById("navigation").innerHTML = `
            <li > <a href="profile.html" id="res" class="far fa-user-circle" style=" color: green;"></a>  </li>
            <li class="current-menu"><a href="index.html">Home</a></li>
                        <li><a href="parkings.html">Parkings</a>

                        </li>

                        <li><a href="about-us.html">About Us</a>
                        </li>
                        <li><a href="notification.html">notification</a></li>
                        <li><a href="contact-us.html">Avis</a></li>
                                    <li><a href="index.html" onclick="logout()">Se d√©connecter</a></li>
                                `;
        }

        function logout() {

            localStorage.removeItem("id");
            location.replace("index.html");

        }
    </script>
    <section class="pt-s5 pb-s5 overlay-wrap" data-plugin-parallax data-plugin-options="{'speed': 1.5}" data-image-src="7.jpg">
        <div class="container overlay-container pt-s2 pb-s5">
            <div class="pb-s5">
                <div class="hero-section-container-tl w-100 h-100 d-flex justify-content-center align-items-center">
                    <div class="text-center mb-s2">
                        <div class="mt-s3 text-white ">
                            <h5>PROCHE DE VOUS</h5>
                        </div>
                        <div class="mt-s1 mb-s5 text-white">
                            <h1 class="animated-headline letters type mb-s2 text-white text-size-20--xs text-size-30--sm">
                                <span class="headline-wrapper text-cherry text-capitalize">
									<b class="is-visible">Trouvez votre place de parking</b>
								
								</span>
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /CONTAINER -->
        <div class="overlay "></div>
    </section>
    <!-- /SECTION -->

    <section class="bg-v5-light pt-s3 pb-s3">
        <div class="quote-setting container" class="text-center">
            <div class="bg-white p-s3 bs-solid bc-light bw-s1 rounded-s2 box-shadow-v1-s5" class="text-center">



                <div class="col-lg-12">

                    <div class="text-center">
                        <div class=" col-md-16 ">
                            <a class="btn bg-warning text-white text-shadow-s1 text-uppercase text-bold-600 text-size-s1 rounded-0 pt-8 pb-8 pl-20 pr-20 box-shadow-v1-s3--hover" data-toggle="modal" data-target=".more-info">Choisir votre parking</a>
                        </div>
                    </div>

                </div>
            </div>

        </div>

        <div class="modal fade text-xs-left modal-xl more-info" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
            <div class="modal-dialog modal_xl" role="document">
                <div class="modal-content modalcontentsticky">
                    <button type="button" class="close btn-primary text-white site_model_close_btn bg-danger" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <div class="modal-body">
                        <div id="googleMap" class="sty"></div>
                        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

                        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCodvr4TmsTJdYPjs_5PWLPTNLA9uA4iq8&amp;callback=googleMap"></script>

                        <script>
                            function calcCrow(lat1, lon1, lat2, lon2) {
                                var R = 6371; // km
                                var dLat = toRad(lat2 - lat1);
                                var dLon = toRad(lon2 - lon1);
                                var lat1 = toRad(lat1);
                                var lat2 = toRad(lat2);

                                var a =
                                    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                                    Math.sin(dLon / 2) *
                                    Math.sin(dLon / 2) *
                                    Math.cos(lat1) *
                                    Math.cos(lat2);
                                var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                                var d = R * c;
                                return d;
                            }

                            // Converts numeric degrees to radians
                            function toRad(Value) {
                                return (Value * Math.PI) / 180;
                            }
                        </script>
                        <script>
                            var xx;
                            var yy;

                            function getLocation() {
                                if (navigator.geolocation) {
                                    navigator.geolocation.getCurrentPosition(showPosition);
                                } else {
                                    alert("Geolocation is not supported by this browser.");
                                }
                            }

                            function showPosition(position) {
                                xx = position.coords.latitude;
                                yy = position.coords.longitude;
                                initMap(xx, yy);
                            }

                            const chicago = {
                                lat: 41.85,
                                lng: -87.65
                            };

                            function CenterControl(controlDiv, map) {
                                // Set CSS for the control border.
                                const controlUI = document.createElement("div");

                                controlUI.style.backgroundColor = "#fff";
                                controlUI.style.border = "2px solid #fff";
                                controlUI.style.borderRadius = "3px";
                                controlUI.style.boxShadow = "0 2px 6px rgba(0,0,0,.3)";
                                controlUI.style.cursor = "pointer";
                                controlUI.style.marginTop = "8px";
                                controlUI.style.marginBottom = "22px";
                                controlUI.style.textAlign = "center";
                                controlUI.title = "Click to recenter the map";
                                controlDiv.appendChild(controlUI);

                                // Set CSS for the control interior.
                                const controlText = document.createElement("div");

                                controlText.style.color = "rgb(25,25,25)";
                                controlText.style.fontFamily = "Roboto,Arial,sans-serif";
                                controlText.style.fontSize = "16px";
                                controlText.style.lineHeight = "38px";
                                controlText.style.paddingLeft = "5px";
                                controlText.style.paddingRight = "5px";
                                controlText.innerHTML = "Refresh";
                                controlUI.appendChild(controlText);
                                // Setup the click event listeners: simply set the map to Chicago.
                                controlUI.addEventListener("click", () => {
                                    alert("test");
                                });
                            }
                        </script>
                        <script async type="text/javascript">
                            function toset(d) {
                                d = d


                                return d;
                            }

                            var pos = {
                                url: "images/marker.png",
                                scaledSize: new google.maps.Size(45, 45),
                                origin: new google.maps.Point(0, 0),
                                anchor: new google.maps.Point(25, 50),
                            };
                            var truck = {
                                url: "images/truck.png",
                                scaledSize: new google.maps.Size(45, 45),
                                origin: new google.maps.Point(0, 0),
                                anchor: new google.maps.Point(25, 50),
                            };

                            // On initialise la latitude et la longitude de Tunis (centre de la carte)
                            var x = xx;
                            var y = yy;
                            var map = null;
                            // Fonction d'initialisation de la carte
                            function initMap(x, y) {
                                map = new google.maps.Map(document.getElementById("googleMap"), {
                                    center: new google.maps.LatLng(x, y),
                                    zoom: 11,
                                    //mapTypeId: "satellite",
                                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                                    mapTypeControl: true,
                                    scrollwheel: false,
                                    mapTypeControlOptions: {
                                        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
                                    },
                                    navigationControl: true,
                                    navigationControlOptions: {
                                        style: google.maps.NavigationControlStyle.ZOOM_PAN,
                                    },
                                });

                                const centerControlDiv = document.createElement("div");
                                centerControlDiv.innerHTML = "Refresh";

                                //CenterControl(centerControlDiv, map);
                                map.controls[google.maps.ControlPosition.TOP_CENTER].push(
                                    centerControlDiv
                                );

                                var marker = new google.maps.Marker({
                                    position: {
                                        lat: x,
                                        lng: y
                                    },
                                    title: "your position",
                                    icon: pos,
                                    map: map,
                                });

                                var lineCoordinates = [];

                                $.ajax({
                                    // On pointe vers le fichier selectData.php
                                    url: "http://172.20.10.4:3000/parkings",
                                }).done(function(json) {
                                    // Si on obtient une r√©ponse, elle est stock√©e dans la variable json
                                    console.log(json);
                                    // On construit l'objet villes √† partir de la variable json
                                    //var positions = JSON.parse(json);
                                    // console.log(positions);
                                    // On parcourt l'objet villes

                                    json = toset(json);

                                    for (position in json) {
                                        var d = calcCrow(x, y, json[position].x, json[position].y);
                                        var t = d * 1.5;
                                        var namePar = json[position].namePar;
                                        var _id = json[position]._id;
                                        vv = new google.maps.LatLng(json[position].x, json[position].y);

                                        lineCoordinates.push(vv);

                                        var marker = new google.maps.Marker({
                                            // parseFloat nous permet de transformer la latitude et la longitude en nombre d√©cimal
                                            position: {
                                                lat: parseFloat(json[position].x),
                                                lng: parseFloat(json[position].y),
                                            },
                                            title: json[position].matricule,
                                            icon: truck,
                                            map: map,
                                        });

                                        d = d.toFixed(2);
                                        t = t.toFixed(2);

                                        const contentString =
                                            `
                 <div style='float:left'><img  height='100px' width='100px' src='images/truck.png'></div>
                 <div style='float:right; padding: 10px;'><b> ` +
                                            t +
                                            ` min</b><br/>
                  Distance ` +
                                            d +
                                            ` km<br/>
                   
                                           name de parking: ` +
                                            namePar +
                                            ` <br/>
                                            <a href="booking.html?id=` + _id + `" class="btn bg-cherry text-white text-shadow-s1 text-uppercase text-bold-600 text-size-s1 rounded-0 pt-8 pb-8 pl-20 pr-20 box-shadow-v1-s3--hover">R√©server</a>
                   </div>
                 `;

                                        const infowindow = new google.maps.InfoWindow({
                                            content: contentString,
                                        });

                                        /*
                  const infowindow = new google.maps.InfoWindow({
              content: contentString,
          });
          */

                                        marker.addListener("click", function() {
                                            infowindow.open(map, this);
                                        });

                                        // assuming you also want to hide the infowindow when user mouses-out
                                        map.addListener("click", function() {
                                            infowindow.close();
                                        });
                                    }

                                    /*
             const flightPath = new google.maps.Polyline({
                 path: lineCoordinates,
                 geodesic: true,
                 strokeColor: "#FF0000",
                 strokeOpacity: 1.0,
                 strokeWeight: 6,
               });
             
               flightPath.setMap(map);
             */
                                });
                            }

                            window.onload = function() {
                                // Fonction d'initialisation qui s'ex√©cute lorsque le DOM est charg√©
                                getLocation();
                            };
                        </script>
                    </div>
                </div>
            </div>
        </div>
        <!-- /CONTAINER -->
        <div class="container pt-s4">
            <h3 style="text-align: center;">Nos parkings vous facilitent la ville !</h3>
            <div class="row">
                <div class="col-lg-4 col-md-12 col-sm-12">
                    <div class="mt-s2 mb-s2 box-shadow-parent--hover">
                        <div class="d-flex align-items-center mb-s2">
                            <div class="mr-s2">
                                <div class="text-size-s1 rounded-s3 bg-cherry text-white text-center h--40 w--40 d-flex justify-content-center align-items-center box-shadow-v2-s3-child--hover">
                                    <i class="	fas fa-donate"></i>
                                </div>
                            </div>
                            <div>
                                <h2 class="text-size-18 text-bold-600 m-0">Faites des √©conomies</h2>
                            </div>
                        </div>
                        <p class="m-0">Notre application n√©gocie pour vous les meilleurs tarifs. R√©servez votre place et √©conomisez jusqu‚Äô√† 60% gr√¢ce √† nos offres sp√©ciales !</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-12 col-sm-12">
                    <div class="mt-s2 mb-s2 box-shadow-parent--hover">
                        <div class="d-flex align-items-center mb-s2">
                            <div class="mr-s2">
                                <div class="text-size-s1 rounded-s3 bg-cherry text-white text-center h--40 w--40 d-flex justify-content-center align-items-center box-shadow-v2-s3-child--hover">
                                    <i class="fas fa-hourglass-start"></i>
                                </div>
                            </div>
                            <div>
                                <h2 class="text-size-18 text-bold-600 m-0">Gagnez du temps</h2>
                            </div>
                        </div>
                        <p class="m-0">Ne perdez plus votre temps √† chercher une place.Vous la trouvez et la r√©servez en quelques clics.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-12 col-sm-12">
                    <div class="mt-s2 mb-s2 box-shadow-parent--hover">
                        <div class="d-flex align-items-center mb-s2">
                            <div class="mr-s2">
                                <div class="text-size-s1 rounded-s3 bg-cherry text-white text-center h--40 w--40 d-flex justify-content-center align-items-center box-shadow-v2-s3-child--hover">
                                    <i class="icon-screen-desktop"></i>
                                </div>
                            </div>
                            <div>
                                <h2 class="text-size-18 text-bold-600 m-0">Restez serein !</h2>
                            </div>
                        </div>
                        <p class="m-0">Notre support client est disponible du lundi au dimanche 7/7 et 24/24 par t√©l√©phone ou par e-mail .</p>
                    </div>
                </div>
            </div>
            <!-- /ROW -->
        </div>
        <!-- /CONTAINER -->
    </section>
    <!-- /SECTION -->

    <section class=" pt-s5 pb-s5">
        <div class="container" style="    background-image: url(1.jpg);
        background-size: cover;
       
      
      
       ">
            <div class="mb-80 text-center">
                <h2 class="text-bold-700 text-white"> Stationnement en 3 √©tapes simples</h2>
                <div class="mb-s3">
                    <hr class="mb-0 bc-v1-dark">
                    <hr class="w--60 bs-solid bc-cherry bw-s5 bt-0 bl-0 br-0 mt-0">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4 col-md-12 col-sm-12">
                    <div class="mt-s2 mb-s2 mb-60--md mb-60--sm mb-60--xs box-shadow-parent--hover mt--parent--hover">
                        <div class="bg-white text-center pt-s4 bs-solid bc-light bw-s1 position-relative">
                            <div class="hero-section-container-tl w-100 mt--s4 mt--s5-child">
                                <img class="w--100 rounded-circle bs-solid bc-white bw-s5 box-shadow-v2-s3-child--hover" src="3jpg.jpg" alt="Departure & Arrival Details">
                            </div>
                            <div class="p-s2 mt-s2 mb-s2">
                                <span class="text-cherry text-bold-600">Etape 1</span>
                                <h5 class="mt-s1 mb-0 text-bold-600">Trouvez le parking id√©al</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-12 col-sm-12">
                    <div class="mt-s2 mb-s2 mb-60--md mb-60--sm mb-60--xs box-shadow-parent--hover mt--parent--hover">
                        <div class="bg-white text-center pt-s4 bs-solid bc-light bw-s1 position-relative">
                            <div class="hero-section-container-tl w-100 mt--s4 mt--s5-child">
                                <img class="w--100 rounded-circle bs-solid bc-white bw-s5 box-shadow-v2-s3-child--hover" src="assets/images/steps/step-2.png" alt="Your & Vehicle Detail">
                            </div>
                            <div class="p-s2 mt-s2 mb-s2">
                                <span class="text-cherry text-bold-600">Etape 2</span>
                                <h5 class="mt-s1 mb-0 text-bold-600">R√©servez votre place</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-12 col-sm-12">
                    <div class="mt-s2 mb-s2 mb-60--md mb-60--sm mb-60--xs box-shadow-parent--hover mt--parent--hover">
                        <div class="bg-white text-center pt-s4 bs-solid bc-light bw-s1 position-relative">
                            <div class="hero-section-container-tl w-100 mt--s4 mt--s5-child">
                                <img class="w--100 rounded-circle bs-solid bc-white bw-s5 box-shadow-v2-s3-child--hover" src="t√©l√©chargement.png" alt="Payment Detail">
                            </div>
                            <div class="p-s2 mt-s2 mb-s2">
                                <span class="text-cherry text-bold-600">Etape  3</span>
                                <h5 class="mt-s1 mb-0 text-bold-600">Garez-vous !</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /ROW -->
        </div>
        <!-- /CONTAINER -->
    </section>
    <!-- /SECTION -->

    <section class="bg-white pt-s5 pb-s5">
        <div class="container">
            <div class="mb-40 text-center">
                <h6 class="text-bold-700 text-cherry">Avis</h6>
                <h2 class="text-bold-700 text-dark">Ce que disent nos clients sur nos parkings</h2>
                <div class="mb-s3">
                    <hr class="w--60 bs-solid bc-cherry bw-s5 bt-0 bl-0 br-0 mt-s2">
                </div>
            </div>
            <div class="row" id="listadmin">
                <script>
                    // Create a request variable and assign a new XMLHttpRequest object to it.
                    var request = new XMLHttpRequest();

                    // Open a new connection, using the GET request on the URL endpoint
                    request.open("GET", "http://172.20.10.4:3000/opinions", true);

                    request.onload = function() {
                        // Begin accessing JSON data here
                        var data = JSON.parse(this.response);

                        console.log(data);
                        var j = 1;
                        var ee = document.getElementById("listadmin");
                        data.forEach((i) => {


                            ch =

                                `
                <div class="col-md-6">
                    <div class="bg-white  bs-solid bc-light bw-s1 position-relative">
                        <div class="d-flex mt-s2 ml-20">
                          
                          <div>
                              <span class="text-bold-800 text-dark d-block"> Name:   ` + i.name + `</span>
                              <span class="text-size-s1 text-muted">E-mail:  ` + i.email + `</span>
                          </div>
                      </div>
                        <div>
                            <p class="mb-s1 text-size-s2 text-dark font-italic"><i class="	far fa-comment-dots" style='font-size:30px;color:#13050561'></i> : ` + i.msg + `</p>
                        </div>
                        
                    </div>
                </div>
                `;
                            ee.insertAdjacentHTML("beforeend", ch);
                        });
                    };

                    // Send request
                    request.send();
                </script>
            </div>
            <!-- /ROW -->

            <!-- /ROW -->
        </div>
        <!-- /CONTAINER -->
    </section>
    <!-- /SECTION -->

    <!--
    #################################
        - Begin: FOOTER -
    #################################
    -->


    <footer class="bg-dark pt-s1 pb-s1">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12">
                    <div class="mt-s2 mb-s2 text-white">
                        <p class="m-0 text-white">&copy; Copyright 2022 by <abbr title="Parking"><a href="#" class="text-white">Parking</a></abbr>. All Rights Reserved.</p>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12">
                    <div class="mt-s2 mb-s2 text-white text-right">
                        <a class="text-white" href="#">Privacy Policy</a> | <a class="text-white" href="#">Terms & Conditions</a>
                    </div>
                </div>
            </div>
            <!-- /ROW -->
        </div>
        <!-- /CONTAINER -->
    </footer>
    <!-- End: FOOTER -
    ################################################################## -->

    <script src="assets/js/jquery-3.3.1.min.js"></script>
    <script src="assets/vendors/appear/jquery.appear.min.js"></script>
    <script src="assets/vendors/jquery.easing/jquery.easing.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/vendors/common/common.min.js"></script>

    <!-- FANCY-BOX -->
    <script src="assets/vendors/fancybox/jquery.fancybox.min.js"></script>

    <!-- MENU -->
    <script src="assets/vendors/menu/src/main.menu.js"></script>

    <!-- CAROUSEL -->
    <script src="assets/vendors/owl.carousel/owl.carousel.min.js"></script>

    <!-- ANIMATED-HEADLINES -->
    <script src="assets/vendors/animated-headline/js/animated-headline.js"></script>

    <!-- THEME-CUSTOM -->
    <script src="assets/js/main.js"></script>

    <!-- THEME-INITIALIZATION-FILES -->
    <script src="assets/js/theme.init.js"></script>
    <script src="assets/js/custom.js"></script>


</body>

</html>